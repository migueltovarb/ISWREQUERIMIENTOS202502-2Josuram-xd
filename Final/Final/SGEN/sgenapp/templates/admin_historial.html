<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Historial de Acciones • SGEN</title>
<style>
:root{--brand-blue:#1565C0;--bg:#fff;--border:#DADCE0;--muted:#6B7280;--radius-xl:1rem}
*{box-sizing:border-box}body{font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;background:#f4f6fa;margin:0;padding:2rem}
.container{max-width:1100px;margin:0 auto;background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-xl);padding:1.5rem}
.header{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}
.search{margin-left:auto}
.table{width:100%;border-collapse:collapse}
.table th{background:#f9fafb;padding:.75rem;text-align:left;border-bottom:1px solid var(--border)}
.table td{padding:.75rem;border-bottom:1px solid var(--border)}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Historial de Acciones</h1>
    <form method="get" class="search">
      <input type="text" name="q" placeholder="Buscar acción, usuario o descripción" value="{{ query|default:'' }}">
      <button type="submit">Buscar</button>
    </form>
  </div>
  {% if acciones %}
  <table class="table">
    <thead>
      <tr><th>Fecha / Hora</th><th>Usuario</th><th>Acción</th><th>Descripción</th></tr>
    </thead>
    <tbody>
      {% for a in acciones %}
      <tr>
        <td>{{ a.fecha_hora|date:'d/m/Y H:i:s' }}</td>
        <td>{{ a.usuario.username }}</td>
        <td>{{ a.accion }}</td>
        <td>{{ a.descripcion }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>No hay acciones registradas.</p>
  {% endif %}
  <div style="margin-top:1rem"><a href="{% url 'admin_dashboard' %}">Volver al Dashboard</a></div>
</div>
</body>
</html>